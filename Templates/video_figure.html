{% extends 'layout2.html' %}

{% block body %}

<!doctype html>
<html lang="en">
  <head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!--<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    -->
    <!--<link rel="stylesheet" type="text/css"  href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">-->
  </head>
  <body>

    <!--<button id="btn">Toggle</button>
    
    <div class="alert alert-danger fade out" id="bsalert">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
      <strong>Info!</strong> You need to write a figure name
    </div>-->


    <div class="container">               
      <div class="row">
        <div class="col-md-1"></div>
        <div class="col-md-4">
          <a href="/" id="" class="btn btn-primary" role="button">Exit</a>      
          <a onclick="sub2()" id="save_figura" class="btn btn-primary" role="button">Save Figure</a>
          <input type="text" name="figure_name" id="figure_name" class="form-control-sm" placeholder="Enter figure name"/>
          <!--<a onclick="sub()" href="/save_fig/{{var_figure_name}}" id="prova" class="btn btn-primary" style = "color: green" role="button">Save Figure</a>-->
        </div>
        <div class="col-md-3">
          <h4 class="label_titol mt-2 fw-bold text-center py-0 mt-2">Creating a figure...</h4>
        </div>
        <div class="col-md-4">
          <a href="/delete_mov_fig" class="btn btn-primary" role="button">Delete Last Movement</a>
          <a href="/continue_fig" id="" class="btn btn-primary" role="button">Continue Figure</a>
        </div>
      </div>
    </div>
   
   
    <div class="container">               
      <div class="row">        
        <div class="col-md-1"></div>
        <!-- <div class="card-body" align="center"> -->
        <div class="col-md-10">
          <div class="card-body">
            <!--<div class="shadow p-2 mb-1 bg-primary rounded">-->

              {% for mov_fig_act in figura_actual %}    
                <!--<video width="640" height="480" controls>-->  
                <video width = "320" height = "240" controls class="shadow p-1 mb-2 bg-primary rounded-end">
                    <source src="../static/videos/{{ mov_fig_act }}" type="video/mp4">                
                </video>
              {% endfor %} 

            <!--</div>  -->      
          </div> 
        </div>       
      </div>
    </div>
    <!--<a href="/delete_mov_fig" class="btn btn-primary" role="button">Delete Last Movement</a>
    <a href="/continue_fig" id="" class="btn btn-primary" role="button">Continue Figure</a>-->


    <!-- Ponemos 'mov_fig_act' en el lugar donde en 'video_mov_fig' poníamos movimiento, ya que creo que este 'mov_fig_act' es el
         último de la lista 'figura_actual'. Así mediante el '/search_fig/' de 'app.py' podremos encontrar las siguientes opciones 
         del próximo movimiento de la figura -->
 
    <script>
      /*sirve para poner el valor del input (figure_name) a una variable, y luego utilizar la variable para enviarla al app.py
      a través del href del button save_figura. Y en el app.py se creará la figura*/
      /*https://es.stackoverflow.com/questions/23299/c%C3%B3mo-pasar-un-input-del-html-a-una-variable-en-javascript*/
      
      var figure_name = null;

      function sub(){
        var_figure_name = document.getElementsByName("figure_name")[0].value;
        $('#save_figura').attr('href', '/save_fig/'+var_figure_name); 
        /*alert(var_figure_name);*/
      };

      function sub2(){
        if ($("#figure_name").val()=="") {
          alert('El input está vacío');
        }
        else {   
          var_figure_name = document.getElementsByName("figure_name")[0].value;
          $('#save_figura').attr('href', '/save_fig/'+var_figure_name); 
          /*alert(var_figure_name);*/
        }
      } 
        
    </script>

    <!-- Alerta que aparece debajo del botón que se pulsa... en este caso debajo del botón toggle -->
    <script>
      function toggleAlert(){
        $(".alert").toggleClass('in out'); 
        return false; // Keep close.bs.alert event from removing from DOM
      }
      $("#btn").on("click", toggleAlert);
      $('#bsalert').on('close.bs.alert', toggleAlert)
    </script>

  </body>
</html>

{% endblock %}